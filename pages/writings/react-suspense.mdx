import { Fragment } from "react";
import { Code } from "../../src/components/writings/index.js";

Most tutorials introduce React as a UI library. This makes sense because React _is_ a UI library. That‚Äôs literally what the tagline says!

I‚Äôve written about the challenges of creating [user interfaces](/the-elements-of-ui-engineering/) before. But this post talks about React in a different way ‚Äî more as a [programming runtime](https://en.wikipedia.org/wiki/Runtime_system).

**This post won‚Äôt teach you anything about creating user interfaces.** But it might help you understand the React programming model in more depth.

---

**Note: If you‚Äôre _learning_ React, check out [the docs](https://reactjs.org/docs/getting-started.html#learn-react) instead.**

**This is a deep dive ‚Äî THIS IS NOT a beginner-friendly post.** In this post, I‚Äôm describing most of the React programming model from first principles. I don‚Äôt explain how to use it ‚Äî just how it works.

It‚Äôs aimed at experienced programmers and folks working on other UI libraries who asked about some tradeoffs chosen in React. I hope you‚Äôll find it useful!

**Many people successfully use React for years without thinking about most of these topics.** This is definitely a programmer-centric view of React rather than, say, a [designer-centric one](http://mrmrs.cc/writing/2016/04/21/developing-ui/). But I don‚Äôt think it hurts to have resources for both.

With that disclaimer out of the way, let‚Äôs go!

---

## Host Tree

Some programs output numbers. Other programs output poems. Different languages and their runtimes are often optimized for a particular set of use cases, and React is no exception to that.

React programs usually output **a tree that may change over time**. It might be a [DOM tree](https://www.npmjs.com/package/react-dom), an [iOS hierarchy](https://developer.apple.com/library/archive/documentation/General/Conceptual/Devpedia-CocoaApp/View%20Hierarchy.html), a tree of [PDF primitives](https://react-pdf.org/), or even of [JSON objects](https://reactjs.org/docs/test-renderer.html). However, usually, we want to represent some UI with it. We‚Äôll call it a ‚Äú_host_ tree‚Äù because it is a part of the _host environment_ outside of React ‚Äî like DOM or iOS. The host tree usually has [its](https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild) [own](https://developer.apple.com/documentation/uikit/uiview/1622616-addsubview) imperative API. React is a layer on top of it.

So what is React useful for? Very abstractly, it helps you write a program that predictably manipulates a complex host tree in response to external events like interactions, network responses, timers, and so on.

A specialized tool works better than a generic one when it can impose and benefit from particular constraints. React makes a bet on two principles:

-   **Stability.** The host tree is relatively stable and most updates don‚Äôt radically change its overall structure. If an app rearranged all its interactive elements into a completely different combination every second, it would be difficult to use. Where did that button go? Why is my screen dancing?

-   **Regularity.** The host tree can be broken down into UI patterns that look and behave consistently (such as buttons, lists, avatars) rather than random shapes.

**These principles happen to be true for most UIs.** However, React is ill-suited when there are no stable ‚Äúpatterns‚Äù in the output. For example, React may help you write a Twitter client but won‚Äôt be very useful for a [3D pipes screensaver](https://www.youtube.com/watch?v=Uzx9ArZ7MUU).

```css
class Button extends React.Component {
	state = {
		color: this.props.color
	};
	render() {
		const { color } = this.state; // üî¥ `color` is stale!
		return (
			<button className={"Button-" + color}>{this.props.children}</button>
		);
	}
}
```

```html
<div class="md:flex">
	<div class="md:flex-shrink-0">
		<img
			class="rounded-lg md:w-56"
			src="https://images.unsplash.com/photo-1556740738-b6a63e27c4df?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=448&q=80"
			alt="Woman paying for a purchase"
		/>
	</div>
	<div class="mt-4 md:mt-0 md:ml-6">
		<div class="uppercase tracking-wide text-sm text-indigo-600 font-bold">
			Marketing
		</div>
		<a
			href="#"
			class="block mt-1 text-lg leading-tight font-semibold text-gray-900 hover:underline"
			>Finding customers for your new business</a
		>
		<p class="mt-2 text-gray-600">
			Getting a new business off the ground is a lot of hard work. Here
			are five ideas you can use to find your first customers.
		</p>
	</div>
</div>
```

```css
.sm\:focus\:font-semibold:focus {
	font-weight: 600;
}
.sm\:focus\:font-bold:focus {
	font-weight: 700;
}
.sm\:focus\:font-extrabold:focus {
	font-weight: 800;
}
.sm\:focus\:font-black:focus {
	font-weight: 900;
}
.sm\:h-0 {
	height: 0;
}
.sm\:h-1 {
	height: 0.25rem;
}
.sm\:h-2 {
	height: 0.5rem;
}
.sm\:h-3 {
	height: 0.75rem;
}
.sm\:h-4 {
	height: 1rem;
}
.sm\:h-5 {
	height: 1.25rem;
}
.sm\:h-6 {
	height: 1.5rem;
}
.sm\:h-8 {
	height: 2rem;
}
.sm\:h-10 {
	height: 2.5rem;
}
.sm\:h-12 {
	height: 3rem;
}
.sm\:h-16 {
	height: 4rem;
}
.sm\:h-20 {
	height: 5rem;
}
.sm\:h-24 {
	height: 6rem;
}
.sm\:h-32 {
	height: 8rem;
}
.sm\:h-40 {
	height: 10rem;
}
.sm\:h-48 {
	height: 12rem;
}
.sm\:h-56 {
	height: 14rem;
}
.sm\:h-64 {
	height: 16rem;
}
.sm\:h-auto {
	height: auto;
}
.sm\:h-px {
	height: 1px;
}
.sm\:h-full {
	height: 100%;
}
.sm\:h-screen {
	height: 100vh;
}
.sm\:leading-none {
	line-height: 1;
}
.sm\:leading-tight {
	line-height: 1.25;
}
.sm\:leading-snug {
	line-height: 1.375;
}
.sm\:leading-normal {
	line-height: 1.5;
}
.sm\:leading-relaxed {
	line-height: 1.625;
}
.sm\:leading-loose {
	line-height: 2;
}
.sm\:list-inside {
	list-style-position: inside;
}
.sm\:list-outside {
	list-style-position: outside;
}
.sm\:list-none {
	list-style-type: none;
}
.sm\:list-disc {
	list-style-type: disc;
}
.sm\:list-decimal {
	list-style-type: decimal;
}
.sm\:m-0 {
	margin: 0;
}
.sm\:m-1 {
	margin: 0.25rem;
}
```
